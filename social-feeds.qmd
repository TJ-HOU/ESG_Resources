---
title: "Social Feeds"
---

::: panel-tabset
## Twitter

```{r include=FALSE}
#install.packages("rtweet")
#install.packages("keyring")
library(rtweet)
library(tidyverse)
library(DT)
library(keyring)

appname<-key_get("twittername","thou40")
apikey <-key_get("twitterkey","thou40")
apisecret<-key_get("twittersecret","thou40")
access_token<-key_get("twitter_ac_token","thou40")
access_secret <-key_get("twitter_ac_secret","thou40")

# create token named "twitter_token"
twitter_token <- create_token(
  app = appname,
  consumer_key = apikey,
  consumer_secret = apisecret,
  access_token = access_token,
  access_secret = access_secret)
## search for 500 tweets using the #rstats hashtag
esg_tweets <- search_tweets(q = "#ESG",n = 500)
colnames(esg_tweets)
selected_tweets<-esg_tweets%>%
  select(status_id,created_at,screen_name,text,retweet_count,favorite_count)%>%
  mutate(url=paste0("https://twitter.com/",screen_name,"/status/",status_id))%>%
  mutate(link=paste0("<a href=",url,">",text,"</a>"))%>%
  select(created_at,screen_name,link,retweet_count,favorite_count)
names(selected_tweets) <- c('Tweet','User','Date','Retweet_count', 'Favorite_count')
```

```{r echo=FALSE, results='asis'}
datatable(selected_tweets, options = list(pageLength = 10),escape=FALSE, class = 'cell-border stripe')
```

## Reddit

```{r echo=FALSE,message=FALSE,warning=FALSE,results='asis'}
library(RedditExtractoR)
#esg_urls <- find_thread_urls(subreddit="EsgInvesting", sort_by="top")
#esg_urls$title_new<-paste0("<a href=",esg_urls$url,">",esg_urls$title,"</a>")
#reddit_select<-esg_urls%>%select(title_new,date_utc,subreddit,comments)%>%distinct()
#colnames(reddit_select) <- c("Post","Post Date","Subreddit","# of comments")
reddit_select<- read.csv("reddit_select.csv")
datatable(reddit_select, options = list(pageLength = 10),escape=FALSE, class = "cell-border stripe")
```
:::
